{% load static wagtailcore_tags wagtailimages_tags menu_tags %}

<div class="litetooltip-hotspot-wrapper" style="max-width: 1600px">
	<div class="litetooltip-hotspot-container" style="padding-bottom: 68.625%">

		{% for node in nodes %}
			{% if node.overlay_image %}
				{% map_node_html node.node_html|safe as data %}
				<img
					src="{{node.overlay_image.file.url}}"
					id="{{data.attrs.id}}__background"
					class="map-overlay"
					style="z-index:{{forloop.counter|add:3}};"
				>
			{% endif %}
		{% endfor %}

		<img src="{{settings.map.MapSettings.map_image.file.url}}" class="map-background" data-width="1600" data-height="1098" />

		{% for node in nodes %}
			{% if node.node_html %}
				{% map_node_html node.node_html|safe node.node_image as data %}

				{% if node.node_image %}
					<div
						class="hotspot {{node.type}} image-hotspot"
						data-opacity="1"
						data-width="auto"

						data-hotspot-borderradius=""
						data-hotspot-bgcolor=""
						data-hotspot-bordercolor=""
				{% elif node.type == 'hidden' %}
					<div
						class="hotspot {{node.type}}"
						data-opacity="0"
						data-width="auto"

						data-hotspot-borderradius=""
						data-hotspot-bgcolor=""
						data-hotspot-bordercolor=""
				{% else %}
					<div
						class="hotspot {{node.type}}"
						data-opacity="0.8"
						data-width="{{data.attrs.data_width}}"

						data-hotspot-borderradius="{{data.attrs.data_borderradius}}"
						data-hotspot-bgcolor="#000000"
						data-hotspot-bordercolor="#FFFFFF"
				{% endif %}
						id="{{data.attrs.id}}"
						style="{{data.attrs.style}}; z-index:{{forloop.counter|add:1000}}!important; {% if node.rotate %}transform:rotate({{node.rotate}}deg){% endif %}"

						data-template="{{data.attrs.data_template}}"
						data-templatename="{{data.attrs.data_templatename}}"

						data-location="bottom"

						data-backcolor="#000000"
						data-textcolor="#FFFFFF"
						data-textalign="{{data.attrs.data_textalign}}"

						data-margin="5"
						data-padding="10"

						data-delay="{{data.attrs.data_delay}}"
						data-trigger="hover"
						data-issticky="true"

						data-hotspot-x="{{data.attrs.data_hotspot_x}}"
						data-hotspot-y="{{data.attrs.data_hotspot_y}}"
						data-hotspot-blink="false"
					>
						{% if node.type != 'hidden' %}
							<div class="node-title">
								{{node.title}}
							</div>
							{% if node.type != 'continent' and node.type != 'ocean' %}
								<div class="data-container">
									<h1>{{node.title}}</h1>
									{{node.description|richtext}}
								</div>
							{% endif %}
						{% endif %}
					</div>
			{% endif %}
		{% endfor %}

	</div>
</div>
